<!doctype html>
<html>
  <head>
    <title>Yuh protocol</title>
  </head>
  <p>Link is: <i id="link"></i></p>
  <p>
    <input id="challenge" type="text">
  </p>
  <p>  
    <button id="button1" onclick="openApp()">Click me!</button>
  </p>
  <p>
    <a id="alink" href="yuh://authorization/email-otp">A link</a>
  </p>
<script>
  var challenge = "";
  var deeplink = () => `yuh://authorization/email-otp?challenge=${challenge}`;
  (function init() {
    document.getElementById("challenge").addEventListener("input", 
                                                          (e) => updateChallenge(e?.target?.value));
  })();
  
  function openApp() {
    console.log("Opening yuh app");
    window.location.href = deeplink();
  }

  function updateChallenge(ch) {
    challenge = ch;
    document.getElementById("alink").href = deeplink();
    document.getElementById("link").innerText = deeplink();
  }
  
</script>
</body>
</html>
